@page
@model HomeModel
@{
    ViewData["Title"] = "Inicio";
}

<!--begin::App Content Header-->
<div class="app-content-header">
    <!--begin::Container-->
    <div class="container-fluid">
        <!--begin::Row-->
        <div class="row">
            <div class="col-sm-6">
                @if (User.IsInRole("Administracion") || User.IsInRole("Administrador"))
                        {
                <h3 class="mb-0">Estadística</h3>
                        }
                        @if (User.IsInRole("Docentes") )
                        {
                            <h3>Accesos directos</h3>
                        }
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-end">
                    <li class="breadcrumb-item"><a href="#">Inicio</a></li>
                    <li class="breadcrumb-item active" aria-current="page">
                        Principal
                    </li>
                </ol>
            </div>
        </div> <!--end::Row-->
    </div> <!--end::Container-->
</div> <!--end::App Content Header--> <!--begin::App Content-->

<div class="row">
    @if (User.IsInRole("Administrador") || User.IsInRole("Administracion"))
    {
   
    <div class="col-lg-3 col-6">
    
        <div class="small-box text-bg-primary">
            <div class="inner">
                <h3>@Model.totalinscritos</h3>
                <p>Inscritos</p>
            </div><svg class="small-box-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"></path>
            </svg>
            <a asp-area="" asp-page="/alumno/Create" class="btn btn-success">Registrar Nuevo Estudiante</a>
        </div> 
    </div> 
    
    <div class="col-lg-3 col-6">
    
        <div class="small-box text-bg-success">
            <div class="inner">
                <h3>@Model.totalgrupos</h3>
    
                <p>Grupos</p>
            </div> <svg class="small-box-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75zM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 01-1.875-1.875V8.625zM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 013 19.875v-6.75z"></path>
            </svg> 
            
            <a asp-area="" asp-page="/grupos/Index" class="btn btn-info">Administrar</a>
        </div>
    </div> 
    
    <div class="col-lg-3 col-6">
    
        <div class="small-box text-bg-warning">
            <div class="inner">
                <h3>@Model.ciclo</h3>
                <p>Ciclo Actual</p>
            </div> <svg class="small-box-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"></path>
            </svg> 
            <a asp-area="" asp-page="/generales/ciclos/Index" class="btn btn-success">Administrar</a>
        </div> 
    </div> 
    <div class="col-lg-3 col-6">
    
        <div class="small-box text-bg-danger">
            <div class="inner">
                <h3>10</h3>
                <p>Carreras</p>

            </div> <svg class="small-box-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path clip-rule="evenodd" fill-rule="evenodd" d="M2.25 13.5a8.25 8.25 0 018.25-8.25.75.75 0 01.75.75v6.75H18a.75.75 0 01.75.75 8.25 8.25 0 01-16.5 0z"></path>
                <path clip-rule="evenodd" fill-rule="evenodd" d="M12.75 3a.75.75 0 01.75-.75 8.25 8.25 0 018.25 8.25.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75V3z"></path>
            </svg> 
            <a asp-area="" asp-page="/generales/carrera" class="btn btn-success">Administrar</a>
        </div> 
    </div>
    
    

    
       <div class="row">
            <div class="col-lg-12">
        <h2>DASHBOARD</h2>

                <form method="get" action="alumno/Busqueda">
                    <h5>Buscar alumno</h5>
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" placeholder="Buscar por nombre o apellido" name="buscar"  />
                        <button class="btn btn-outline-secondary" type="submit">Buscar</button>
                    </div>
                </form>

        <h2 class="mb-4">Lista de últimos estudiantes inscritos</h2>
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Lista de últimos estudiantes inscritos</h3>
                                </div>
                                <div class="card-body">
                                    @if (Model.Alumno != null && Model.Alumno.Any())
                                    {
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Nombres</th>
                                                        <th>Apellidos</th>
                                                        <th>Fecha de Nacimiento</th>
                                                        <th>Email</th>
                                                        <th>Acciones</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (var item in Model.Alumno)
                                                    {
                                                        <tr>
                                                            <td>@item.Nombres</td>
                                                            <td>@item.Apellidos</td>
                                                            <td>@item.FechaDeNacimiento.ToShortDateString()</td>
                                                            <td>@item.Email</td>
                                                            <td>
                                                                <a asp-page="/alumno/Details" asp-route-id="@item.AlumnoId" class="btn btn-info btn-sm">
                                                                    <i class="fas fa-eye"></i> Detalles
                                                                </a>
                                                            </td>
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        </div>

                                        <div class="d-flex justify-content-between align-items-center mt-3">
                                            <div>
                                                Mostrando @(((Model.PageNumber - 1) * Model.PageSize) + 1) a @(Math.Min(Model.PageNumber * Model.PageSize, Model.TotalPages * Model.PageSize)) de @(Model.TotalPages * Model.PageSize) resultados
                                            </div>
                                            <nav aria-label="Navegación de páginas">
                                                <ul class="pagination">
                                                    <!-- Botón Primera Página -->
                                                    @if (Model.StartPage > 1)
                                                    {
                                                        <li class="page-item">
                                                            <a class="page-link" asp-page="./Home" asp-route-pageNumber="1" aria-label="Primera">
                                                                <span aria-hidden="true">1</span>
                                                            </a>
                                                        </li>
                                                        @if (Model.StartPage > 2)
                                                        {
                                                            <li class="page-item disabled">
                                                                <span class="page-link">...</span>
                                                            </li>
                                                        }
                                                    }

                                                    <!-- Botón Anterior -->
                                                    <li class="page-item @(!Model.HasPreviousPage ? "disabled" : "")">
                                                        <a class="page-link" asp-page="./Home" asp-route-pageNumber="@(Model.PageNumber - 1)" aria-label="Anterior">
                                                            <span aria-hidden="true">&laquo;</span>
                                                        </a>
                                                    </li>

                                                    <!-- Páginas visibles -->
                                                    @for (int i = Model.StartPage; i <= Model.EndPage; i++)
                                                    {
                                                        <li class="page-item @(i == Model.PageNumber ? "active" : "")">
                                                            <a class="page-link" asp-page="./Home" asp-route-pageNumber="@i">@i</a>
                                                        </li>
                                                    }

                                                    <!-- Botón Siguiente -->
                                                    <li class="page-item @(!Model.HasNextPage ? "disabled" : "")">
                                                        <a class="page-link" asp-page="./Home" asp-route-pageNumber="@(Model.PageNumber + 1)" aria-label="Siguiente">
                                                            <span aria-hidden="true">&raquo;</span>
                                                        </a>
                                                    </li>

                                                    <!-- Botón Última Página -->
                                                    @if (Model.EndPage < Model.TotalPages)
                                                    {
                                                        @if (Model.EndPage < Model.TotalPages - 1)
                                                        {
                                                            <li class="page-item disabled">
                                                                <span class="page-link">...</span>
                                                            </li>
                                                        }
                                                        <li class="page-item">
                                                            <a class="page-link" asp-page="./Home" asp-route-pageNumber="@Model.TotalPages" aria-label="Última">
                                                                <span aria-hidden="true">@Model.TotalPages</span>
                                                            </a>
                                                        </li>
                                                    }
                                                </ul>
                                            </nav>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="alert alert-info">
                                            No hay estudiantes inscritos en este año.
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        </div>
    }

    @if (User.IsInRole("Docentes") || User.IsInRole("Administracion"))
    {
        @* <div>Contenido para docentes y administración</div> *@
    }

</div> <!--end::Row--> <!--begin::Row-->

<style>
    .pagination {
        margin-bottom: 0;
        flex-wrap: wrap;
        justify-content: center;
    }
    .page-link {
        color: #007bff;
        background-color: #fff;
        border: 1px solid #dee2e6;
        margin: 0 2px;
        border-radius: 4px;
        transition: all 0.2s ease-in-out;
    }
    .page-link:hover {
        background-color: #e9ecef;
        border-color: #dee2e6;
        color: #0056b3;
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .page-item.active .page-link {
        background-color: #007bff;
        border-color: #007bff;
        color: white;
        font-weight: bold;
    }
    .page-item.disabled .page-link {
        color: #6c757d;
        pointer-events: none;
        background-color: #fff;
        border-color: #dee2e6;
        opacity: 0.6;
    }
    .page-item.disabled .page-link:hover {
        transform: none;
        box-shadow: none;
    }
    .table th {
        background-color: #f8f9fa;
    }
    .btn-sm {
        padding: 0.25rem 0.5rem;
        font-size: 0.875rem;
    }
    
    /* Estilos para los puntos suspensivos */
    .page-item.disabled .page-link:not(.page-link:hover) {
        background-color: transparent;
        border-color: transparent;
        color: #6c757d;
        font-weight: bold;
    }
    
    /* Responsive para móviles */
    @@media (max-width: 768px) {
        .pagination {
            justify-content: center;
        }
        .page-link {
            padding: 0.375rem 0.5rem;
            font-size: 0.875rem;
        }
    }
</style>
